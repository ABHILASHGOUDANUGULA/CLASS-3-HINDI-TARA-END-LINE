<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>‡§§‡§æ‡§∞‡§æ ‡§™‡§æ‡§†‡§® - ‡§ï‡§ï‡•ç‡§∑‡§æ 3 ‡§π‡§ø‡§Ç‡§¶‡•Ä</title>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Noto Sans Devanagari', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.9;
    font-size: 22px;
    padding: 30px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
}

.container {
    max-width: 900px;
    margin: 0 auto;
}

h1 {
    text-align: center;
    color: white;
    font-size: 44px;
    margin-bottom: 10px;
    text-shadow: 3px 3px 6px rgba(0,0,0,0.4);
    font-weight: bold;
}

.credits {
    text-align: center;
    color: white;
    font-size: 18px;
    margin-bottom: 40px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
    font-style: italic;
    background: rgba(255, 255, 255, 0.1);
    padding: 10px 20px;
    border-radius: 10px;
    display: inline-block;
    margin-left: 50%;
    transform: translateX(-50%);
}

.story-container {
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    padding: 30px;
    border-radius: 20px;
    margin-bottom: 30px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    transition: transform 0.3s ease;
}

.story-container:hover {
    transform: translateY(-5px);
}

.story-container:nth-child(2) {
    background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
}

.story-container:nth-child(3) {
    background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
}

.story-container:nth-child(4) {
    background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
}

.story-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px 25px;
    border-radius: 12px;
    margin-bottom: 25px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.story-header:hover {
    transform: scale(1.02);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

.story-header h2 {
    font-size: 30px;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.button-container {
    text-align: center;
    margin-bottom: 20px;
}

.play-button {
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    color: white;
    border: none;
    padding: 15px 40px;
    font-size: 22px;
    font-weight: bold;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 10px;
}

.play-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

.play-button.playing {
    background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
    animation: pulse-button 1.5s infinite;
}

@keyframes pulse-button {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

.story-text {
    color: #2d3748;
    text-align: justify;
    font-size: 22px;
    line-height: 2.0;
}

.word {
    cursor: pointer;
    padding: 3px 5px;
    border-radius: 4px;
    transition: all 0.2s ease;
    display: inline-block;
}

.word:hover {
    background-color: rgba(255, 255, 0, 0.6);
    transform: scale(1.05);
}

.word.clicked {
    background-color: rgba(255, 165, 0, 0.7);
    font-weight: bold;
}

.word.reading {
    background-color: rgba(50, 205, 50, 0.7);
    font-weight: bold;
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

.icon {
    font-size: 24px;
}
</style>
</head>
<body>

<div class="container">
    <h1>üìñ ‡§§‡§æ‡§∞‡§æ ‡§™‡§æ‡§†‡§® - ‡§ï‡§ï‡•ç‡§∑‡§æ 3 ‡§π‡§ø‡§Ç‡§¶‡•Ä üìñ</h1>
    <div class="credits">Created by A.Abhilash Goud (PRT) KV Nizamabad</div>
    
    <div id="stories"></div>
</div>

<script>
const stories = [
    {
        title: "‡§ú‡§Ç‡§ó‡§≤ ‡§Æ‡•á‡§Ç ‡§Æ‡§Ç‡§ó‡§≤",
        text: `‡§è‡§ï ‡§∏‡§Æ‡§Ø ‡§ï‡•Ä ‡§¨‡§æ‡§§ ‡§π‡•à‡•§ ‡§®‡§Ç‡§¶‡§®‡§µ‡§® ‡§ï‡•á ‡§∏‡§≠‡•Ä ‡§™‡•ç‡§∞‡§æ‡§£‡•Ä ‡§â‡§¶‡§æ‡§∏ ‡§•‡•á‡•§ ‡§∂‡•á‡§∞ ‡§∞‡§æ‡§ú‡§æ ‡§®‡•á ‡§á‡§∏‡§ï‡§æ ‡§ï‡§æ‡§∞‡§£ ‡§ú‡§æ‡§®‡§®‡§æ ‡§ö‡§æ‡§π‡§æ‡•§ ‡§∂‡•á‡§∞ ‡§®‡•á ‡§π‡§æ‡§•‡•Ä ‡§∏‡•á ‡§™‡•Ç‡§õ‡§æ‡•§ ‡§π‡§æ‡§•‡•Ä ‡§®‡•á ‡§¨‡§§‡§æ‡§Ø‡§æ ‡§ï‡§ø ‡§Æ‡§æ‡§®‡§µ ‡§®‡§Ç‡§¶‡§®‡§µ‡§® ‡§ï‡•á ‡§™‡•á‡§°‡§º ‡§ï‡§æ‡§ü ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§á‡§∏‡§∏‡•á ‡§ú‡§æ‡§®‡§µ‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§∞‡§π‡§®‡•á ‡§î‡§∞ ‡§ñ‡§æ‡§®‡•á ‡§ï‡•Ä ‡§ú‡§ó‡§π ‡§ï‡§Æ ‡§Æ‡§ø‡§≤ ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§∂‡•á‡§∞ ‡§®‡•á ‡§∏‡•ã‡§ö‡§æ ‡§ï‡§ø ‡§ß‡•Ä‡§∞‡•á-‡§ß‡•Ä‡§∞‡•á ‡§Æ‡§æ‡§®‡§µ ‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§õ‡•Ä‡§® ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§≠‡§æ‡§≤‡•Ç ‡§®‡•á ‡§ï‡§π‡§æ ‡§ï‡§ø ‡§ï‡§à ‡§™‡•ç‡§∞‡§ú‡§æ‡§§‡§ø‡§Ø‡§æ‡§Å ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§à ‡§π‡•à‡§Ç‡•§ ‡§∏‡§≠‡•Ä ‡§™‡•ç‡§∞‡§æ‡§£‡•Ä ‡§Ö‡§™‡§®‡•Ä ‡§™‡§∞‡•á‡§∂‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å ‡§¨‡§§‡§æ‡§®‡•á ‡§≤‡§ó‡•á‡•§ ‡§µ‡•á ‡§Æ‡§æ‡§®‡§µ ‡§ï‡•ã ‡§¶‡•ã‡§∑ ‡§¶‡•á‡§®‡•á ‡§≤‡§ó‡•á‡•§ ‡§∂‡•á‡§∞ ‡§®‡•á ‡§∏‡§≠‡•Ä ‡§ï‡•ã ‡§∂‡§æ‡§Ç‡§§ ‡§ï‡§ø‡§Ø‡§æ‡•§ ‡§â‡§∏‡§®‡•á ‡§ï‡§π‡§æ ‡§ï‡§ø ‡§á‡§∏ ‡§§‡§∞‡§π ‡§™‡§∞‡•á‡§∂‡§æ‡§®‡•Ä ‡§π‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§ó‡•Ä‡•§ ‡§∏‡§≠‡•Ä ‡§ï‡•ã ‡§ß‡•à‡§∞‡•ç‡§Ø ‡§∞‡§ñ‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§ ‡§á‡§∏ ‡§µ‡§ø‡§∑‡§Ø ‡§™‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ï‡•ã‡§à ‡§â‡§™‡§æ‡§Ø ‡§∏‡•ã‡§ö‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§ ‡§π‡§æ‡§•‡•Ä ‡§®‡•á ‡§ï‡§π‡§æ ‡§ï‡§ø ‡§ï‡•Å‡§õ ‡§™‡•ç‡§∞‡§æ‡§£‡§ø‡§Ø‡•ã‡§Ç ‡§®‡•á ‡§≠‡•Ä ‡§Æ‡§æ‡§®‡§µ ‡§¨‡§∏‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§ï‡§∞ ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§™‡§∞‡•á‡§∂‡§æ‡§® ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à‡•§ ‡§®‡§ü‡§ñ‡§ü ‡§¨‡§Ç‡§¶‡§∞ ‡§®‡•á ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§¶‡§ø‡§Ø‡§æ ‡§ï‡§ø ‡§™‡•ç‡§∞‡§æ‡§£‡•Ä ‡§Æ‡§ø‡§§‡•ç‡§∞ ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ ‡§ï‡•ã ‡§®‡§ø‡§µ‡•á‡§¶‡§® ‡§≠‡•á‡§ú‡§æ ‡§ú‡§æ‡§è‡•§`
    },
    {
        title: "‡§ú‡§≤‡•ç‡§¶‡§¨‡§æ‡§ú‡•Ä",
        text: `‡§∏‡§Ç‡§ú‡§®‡§æ ‡§®‡§æ‡§Æ ‡§ï‡•Ä ‡§è‡§ï ‡§≤‡§°‡§º‡§ï‡•Ä ‡§•‡•Ä‡•§ ‡§µ‡§π ‡§¶‡•Ç‡§∏‡§∞‡•Ä ‡§ï‡§ï‡•ç‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§™‡§¢‡§º‡§§‡•Ä ‡§•‡•Ä‡•§ ‡§¨‡§π‡•Å‡§§ ‡§ö‡•Å‡§≤‡§¨‡•Å‡§≤‡•Ä ‡§î‡§∞ ‡§ö‡§Ç‡§ö‡§≤ ‡§∏‡•ç‡§µ‡§≠‡§æ‡§µ ‡§ï‡•Ä ‡§•‡•Ä‡•§ ‡§µ‡§π ‡§¨‡§π‡•Å‡§§ ‡§π‡•ã‡§∂‡§ø‡§Ø‡§æ‡§∞ ‡§≠‡•Ä ‡§•‡•Ä‡•§ ‡§µ‡§π ‡§™‡§æ‡§∏-‡§™‡§°‡§º‡•ã‡§∏ ‡§Æ‡•á‡§Ç ‡§∏‡§≠‡•Ä ‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡•Ä ‡§•‡•Ä‡•§ ‡§â‡§∏‡•á ‡§π‡§∞ ‡§ï‡§æ‡§Æ ‡§ú‡§≤‡•ç‡§¶‡§¨‡§æ‡§ú‡•Ä ‡§Æ‡•á‡§Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ü‡§¶‡§§ ‡§•‡•Ä‡•§ ‡§á‡§∏‡•Ä ‡§ó‡§°‡§º‡§¨‡§°‡§º‡•Ä ‡§Æ‡•á‡§Ç ‡§â‡§∏‡§ï‡•á ‡§∏‡§æ‡§∞‡•á ‡§ï‡§æ‡§Æ ‡§¨‡§ø‡§ó‡§°‡§º ‡§ú‡§æ‡§§‡•á ‡§•‡•á‡•§ ‡§ò‡§∞ ‡§Æ‡•á‡§Ç ‡§≠‡•Ä ‡§π‡§°‡§º‡§¨‡§°‡§º‡•Ä ‡§Æ‡•á‡§Ç ‡§â‡§∏‡§ï‡•á ‡§π‡§æ‡§•‡•ã‡§Ç ‡§∏‡•á ‡§¨‡§∞‡•ç‡§§‡§® ‡§ó‡§ø‡§∞‡§§‡•á ‡§•‡•á‡•§ ‡§â‡§∏‡§ï‡§æ ‡§ï‡§ø‡§∏‡•Ä ‡§∏‡•á ‡§ü‡§ï‡§∞‡§æ‡§®‡§æ ‡§§‡•ã ‡§Ü‡§Æ ‡§¨‡§æ‡§§ ‡§•‡•Ä‡•§ ‡§è‡§ï ‡§¶‡§ø‡§® ‡§ú‡§≤‡•ç‡§¶‡§¨‡§æ‡§ú‡•Ä ‡§Æ‡•á‡§Ç ‡§µ‡§π ‡§¶‡§æ‡§¶‡•Ä ‡§Æ‡§æ‡§Å ‡§∏‡•á ‡§ü‡§ï‡§∞‡§æ ‡§ó‡§à‡•§ ‡§µ‡§π ‡§ñ‡•Å‡§¶ ‡§ó‡§ø‡§∞ ‡§ó‡§à‡•§ ‡§™‡§æ‡§®‡•Ä ‡§ï‡§æ ‡§ó‡§ø‡§≤‡§æ‡§∏ ‡§≠‡•Ä ‡§ó‡§ø‡§∞ ‡§ó‡§Ø‡§æ‡•§ ‡§¶‡§æ‡§¶‡•Ä ‡§Æ‡§æ‡§Å ‡§®‡•á ‡§â‡§∏‡•á ‡§∏‡§Æ‡§ù‡§æ‡§Ø‡§æ ‡§ï‡§ø ‡§π‡§°‡§º‡§¨‡§°‡§º‡•Ä ‡§® ‡§ï‡§∞‡•á‡•§ ‡§è‡§ï ‡§¶‡§ø‡§® ‡§ï‡•Ä ‡§¨‡§æ‡§§ ‡§π‡•à, ‡§∏‡§Ç‡§ú‡§®‡§æ ‡§™‡§æ‡§†‡§∂‡§æ‡§≤‡§æ ‡§ï‡•á ‡§∏‡§æ‡§Æ‡§®‡•á ‡§∞‡§ø‡§ï‡•ç‡§∂‡•á ‡§∏‡•á ‡§â‡§§‡§∞ ‡§∞‡§π‡•Ä ‡§•‡•Ä‡•§ ‡§ú‡§≤‡•ç‡§¶‡§¨‡§æ‡§ú‡•Ä ‡§Æ‡•á‡§Ç ‡§â‡§∏‡§ï‡§æ ‡§¨‡§∏‡•ç‡§§‡§æ ‡§∞‡§ø‡§ï‡•ç‡§∂‡•á ‡§Æ‡•á‡§Ç ‡§´‡§Å‡§∏‡§ï‡§∞ ‡§´‡§ü ‡§ó‡§Ø‡§æ‡•§ ‡§¨‡§∏‡•ç‡§§‡•á ‡§∏‡•á ‡§∏‡§æ‡§∞‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§® ‡§ú‡§Æ‡•Ä‡§® ‡§™‡§∞ ‡§ó‡§ø‡§∞ ‡§ó‡§Ø‡§æ‡•§ ‡§Ø‡§π ‡§¶‡•á‡§ñ‡§ï‡§∞ ‡§µ‡§π ‡§∞‡•ã‡§®‡•á ‡§≤‡§ó‡•Ä‡•§`
    },
    {
        title: "‡§Æ‡•á‡§∞‡•Ä ‡§¨‡§ó‡§ø‡§Ø‡§æ",
        text: `‡§Ö‡§ú‡§Ø ‡§î‡§∞ ‡§Ö‡§®‡•Ä‡§§‡§æ ‡§∏‡§Æ‡§ù‡§¶‡§æ‡§∞ ‡§≠‡§æ‡§à-‡§¨‡§π‡§® ‡§•‡•á‡•§ ‡§â‡§®‡§ï‡•á ‡§™‡§°‡§º‡•ã‡§∏‡•Ä ‡§ï‡•á ‡§Ü‡§Å‡§ó‡§® ‡§Æ‡•á‡§Ç ‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§¨‡§ó‡§ø‡§Ø‡§æ ‡§•‡•Ä‡•§ ‡§≤‡•á‡§ï‡§ø‡§® ‡§â‡§®‡§ï‡•á ‡§Ö‡§™‡§®‡•á ‡§ò‡§∞ ‡§Æ‡•á‡§Ç ‡§ú‡§ó‡§π ‡§®‡§π‡•Ä‡§Ç ‡§•‡•Ä‡•§ ‡§â‡§®‡§ï‡•Ä ‡§Æ‡§æ‡§Å ‡§ï‡•ã ‡§™‡•Ç‡§ú‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§´‡•Ç‡§≤‡•ã‡§Ç ‡§ï‡•Ä ‡§ú‡§∞‡•Ç‡§∞‡§§ ‡§π‡•ã‡§§‡•Ä ‡§•‡•Ä‡•§ ‡§§‡§¨ ‡§µ‡•á ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§™‡§°‡§º‡•ã‡§∏ ‡§ï‡•á ‡§ò‡§∞ ‡§´‡•Ç‡§≤ ‡§≤‡•á‡§®‡•á ‡§ú‡§æ‡§§‡•á ‡§•‡•á‡•§ ‡§è‡§ï ‡§¶‡§ø‡§® ‡§µ‡•á ‡§´‡•Ç‡§≤ ‡§≤‡•á‡§®‡•á ‡§ó‡§è‡•§ ‡§™‡§°‡§º‡•ã‡§∏ ‡§ï‡•Ä ‡§Ü‡§Ç‡§ü‡•Ä ‡§®‡•á ‡§ï‡§π‡§æ ‡§ï‡§ø ‡§∞‡•ã‡§ú ‡§´‡•Ç‡§≤ ‡§®‡§π‡•Ä‡§Ç ‡§Ü ‡§∏‡§ï‡§§‡•á‡•§ ‡§ú‡•ã ‡§¶‡•ã-‡§ö‡§æ‡§∞ ‡§´‡•Ç‡§≤ ‡§¨‡§ö‡•á ‡§π‡•à‡§Ç, ‡§µ‡•á ‡§≤‡•á ‡§ú‡§æ‡§è‡§Å‡•§ ‡§Ø‡§π ‡§∏‡•Å‡§®‡§ï‡§∞ ‡§µ‡•á ‡§â‡§¶‡§æ‡§∏ ‡§π‡•ã ‡§ó‡§è‡•§ ‡§è‡§ï ‡§¶‡§ø‡§® ‡§â‡§®‡•ç‡§π‡•ã‡§Ç‡§®‡•á ‡§¶‡•Ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§™‡§∞ ‡§¶‡•á‡§ñ‡§æ ‡§ï‡§ø ‡§ó‡§Æ‡§≤‡•á ‡§Æ‡•á‡§Ç ‡§≠‡•Ä ‡§™‡•å‡§ß‡•á ‡§â‡§ó‡§æ‡§è ‡§ú‡§æ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§µ‡•á ‡§¨‡§π‡•Å‡§§ ‡§ñ‡•Å‡§∂ ‡§π‡•Å‡§è‡•§ ‡§Æ‡§æ‡§§‡§æ-‡§™‡§ø‡§§‡§æ ‡§∏‡•á ‡§ï‡§π‡§ï‡§∞ ‡§ó‡§Æ‡§≤‡•á ‡§≤‡•á ‡§Ü‡§è‡•§ ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§®‡•á ‡§â‡§®‡§Æ‡•á‡§Ç ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§°‡§æ‡§≤‡•Ä‡•§ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§Æ‡•á‡§Ç ‡§ñ‡§æ‡§¶ ‡§î‡§∞ ‡§™‡§æ‡§®‡•Ä ‡§Æ‡§ø‡§≤‡§æ‡§Ø‡§æ‡•§ ‡§´‡§ø‡§∞ ‡§´‡•Ç‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§™‡•å‡§ß‡•á ‡§≤‡§ó‡§æ ‡§¶‡§ø‡§è‡•§ ‡§µ‡•á ‡§∞‡•ã‡§ú ‡§™‡•å‡§ß‡•ã‡§Ç ‡§ï‡•Ä ‡§¶‡•á‡§ñ‡§≠‡§æ‡§≤ ‡§ï‡§∞‡§§‡•á ‡§•‡•á‡•§ ‡§ß‡•Ä‡§∞‡•á-‡§ß‡•Ä‡§∞‡•á ‡§â‡§®‡§Æ‡•á‡§Ç ‡§´‡•Ç‡§≤ ‡§ñ‡§ø‡§≤‡§®‡•á ‡§≤‡§ó‡•á‡•§ ‡§Ø‡§π ‡§¶‡•á‡§ñ‡§ï‡§∞ ‡§µ‡•á ‡§¨‡§π‡•Å‡§§ ‡§ñ‡•Å‡§∂ ‡§π‡•Å‡§è‡•§`
    }
];

let currentReadingStory = null;
let isReading = false;
let currentWordIndex = 0;
let storyWords = [];
let readingTimeout;

const storiesDiv = document.getElementById('stories');

// Create story containers
stories.forEach((story, storyIndex) => {
    const storyContainer = document.createElement('div');
    storyContainer.className = 'story-container';
    
    // Story header (clickable)
    const storyHeader = document.createElement('div');
    storyHeader.className = 'story-header';
    storyHeader.innerHTML = `<h2>${story.title}</h2>`;
    storyHeader.onclick = function() {
        speakText(story.title);
    };
    
    // Button container
    const buttonContainer = document.createElement('div');
    buttonContainer.className = 'button-container';
    
    const playButton = document.createElement('button');
    playButton.className = 'play-button';
    playButton.id = `play-btn-${storyIndex}`;
    playButton.innerHTML = `<span class="icon">‚ñ∂Ô∏è</span><span>‡§ï‡§π‡§æ‡§®‡•Ä ‡§∏‡•Å‡§®‡•á‡§Ç</span>`;
    playButton.onclick = function() {
        toggleReading(storyIndex);
    };
    
    buttonContainer.appendChild(playButton);
    
    // Story text
    const storyText = document.createElement('div');
    storyText.className = 'story-text';
    storyText.id = `story-${storyIndex}`;
    
    storyContainer.appendChild(storyHeader);
    storyContainer.appendChild(buttonContainer);
    storyContainer.appendChild(storyText);
    storiesDiv.appendChild(storyContainer);
    
    // Split text into words and wrap each word in span
    const words = [];
    story.text.split(/(\s+)/).forEach((word, wordIndex) => {
        if (word.trim().length > 0 && !word.match(/^\s+$/)) {
            const span = document.createElement('span');
            span.textContent = word;
            span.className = 'word';
            span.dataset.storyIndex = storyIndex;
            
            // Single click for pronunciation
            span.onclick = function(e) {
                e.stopPropagation();
                const cleanWord = word.replace(/[.,!?‡•§]/g, "");
                if (!isReading && cleanWord) {
                    speakText(cleanWord);
                    this.classList.add('clicked');
                    const element = this;
                    setTimeout(() => element.classList.remove('clicked'), 500);
                }
            };
            
            storyText.appendChild(span);
            words.push({
                element: span,
                text: word.replace(/[.,!?‡•§]/g, "")
            });
        } else {
            storyText.appendChild(document.createTextNode(word));
        }
    });
    
    story.wordElements = words;
});

function speakText(text) {
    if (!text || text.trim() === '') return;
    
    // Cancel any ongoing speech
    if (window.speechSynthesis.speaking) {
        window.speechSynthesis.cancel();
    }
    
    // Small delay to ensure cancellation completes
    setTimeout(() => {
        const utterance = new SpeechSynthesisUtterance(text.trim());
        utterance.rate = 0.85;
        utterance.pitch = 1.0;
        utterance.lang = 'hi-IN';
        utterance.volume = 1;
        
        window.speechSynthesis.speak(utterance);
    }, 100);
}

function toggleReading(storyIndex) {
    const playButton = document.getElementById(`play-btn-${storyIndex}`);
    
    if (currentReadingStory === storyIndex && isReading) {
        // Stop reading
        stopReading();
        playButton.innerHTML = `<span class="icon">‚ñ∂Ô∏è</span><span>‡§ï‡§π‡§æ‡§®‡•Ä ‡§∏‡•Å‡§®‡•á‡§Ç</span>`;
        playButton.classList.remove('playing');
    } else {
        // Stop any current reading
        if (isReading) {
            stopReading();
            const oldButton = document.getElementById(`play-btn-${currentReadingStory}`);
            oldButton.innerHTML = `<span class="icon">‚ñ∂Ô∏è</span><span>‡§ï‡§π‡§æ‡§®‡•Ä ‡§∏‡•Å‡§®‡•á‡§Ç</span>`;
            oldButton.classList.remove('playing');
        }
        
        // Start reading this story
        currentReadingStory = storyIndex;
        storyWords = stories[storyIndex].wordElements;
        currentWordIndex = 0;
        isReading = true;
        playButton.innerHTML = `<span class="icon">‚è∏Ô∏è</span><span>‡§∞‡•ã‡§ï‡•á‡§Ç</span>`;
        playButton.classList.add('playing');
        readNextWord();
    }
}

function readNextWord() {
    if (!isReading || currentWordIndex >= storyWords.length) {
        stopReading();
        if (currentReadingStory !== null) {
            const playButton = document.getElementById(`play-btn-${currentReadingStory}`);
            playButton.innerHTML = `<span class="icon">‚ñ∂Ô∏è</span><span>‡§ï‡§π‡§æ‡§®‡•Ä ‡§∏‡•Å‡§®‡•á‡§Ç</span>`;
            playButton.classList.remove('playing');
        }
        return;
    }
    
    // Remove previous highlight
    if (currentWordIndex > 0) {
        storyWords[currentWordIndex - 1].element.classList.remove('reading');
    }
    
    // Highlight current word
    const currentWord = storyWords[currentWordIndex];
    currentWord.element.classList.add('reading');
    currentWord.element.scrollIntoView({ behavior: 'smooth', block: 'center' });
    
    // Speak the word
    const utterance = new SpeechSynthesisUtterance(currentWord.text);
    utterance.rate = 1.1;
    utterance.pitch = 1.0;
    utterance.lang = 'hi-IN';
    
    utterance.onend = function() {
        currentWord.element.classList.remove('reading');
        currentWordIndex++;
        // No timeout - immediate next word
        readNextWord();
    };
    
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(utterance);
}

function stopReading() {
    isReading = false;
    window.speechSynthesis.cancel();
    clearTimeout(readingTimeout);
    
    // Remove all reading highlights
    if (storyWords.length > 0) {
        storyWords.forEach(word => {
            word.element.classList.remove('reading');
        });
    }
}
</script>

</body>
</html>
